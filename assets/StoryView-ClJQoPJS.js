import{u as k,_ as U,s as A}from"./MarkdownRenderer.vue_vue_type_script_setup_true_lang-RVpbqndj.js";import{d as f,r as s,o as i,c as v,w as a,a as t,n as V,b as $,t as b,e as y,F as w,f as S,g,u as x,T as F,h,i as T,_ as L,j as M,k as N}from"./index-CDX0rsf8.js";const D=f({__name:"StoryChoice",props:{icon:String,text:String,class:String,color:String,value:String,tags:Array,expand:Boolean},setup(p){return(o,n)=>{const m=s("v-icon"),r=s("v-spacer"),c=s("v-chip"),l=s("v-card-item"),_=s("v-card"),u=s("v-item");return i(),v(u,null,{default:a(({isSelected:e,selectedClass:d,toggle:C})=>[t(_,{hover:"",class:V(["story-choice border-s-lg bg-background border-opacity-25",d,`border-${p.color}`]),onClick:C},{default:a(()=>[t(l,{density:"compact"},{prepend:a(()=>[t(m,{icon:p.icon,color:e?p.color:"text",class:V(e?null:"opacity-20")},null,8,["icon","color","class"])]),default:a(()=>[$(b(p.text)+" ",1),t(r),(i(!0),y(w,null,S(p.tags,(B,j)=>(i(),v(c,{key:j},{default:a(()=>[$(b(B),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1})}}}),E=f({__name:"StoryChoiceGroup",setup(p){const o=k(),n=g(),m=r=>{const c=o.choices[r];o.tagMap.clearTags(),n.value!==void 0&&o.choices[n.value].tags.forEach(l=>{o.tagMap.addTag(new F(`${l}`,c.color,c.icon))})};return(r,c)=>{const l=s("v-col"),_=s("v-row"),u=s("v-item-group");return i(),v(u,{"selected-class":"rounded-s-lg border-s-lg bg-surface border-opacity-100",modelValue:n.value,"onUpdate:modelValue":[c[0]||(c[0]=e=>n.value=e),m]},{default:a(()=>[t(_,{dense:""},{default:a(()=>[(i(!0),y(w,null,S(x(o).choices,(e,d)=>(i(),v(l,{cols:"12",density:"compact",key:d},{default:a(()=>[t(D,{text:e.text,icon:e.icon,color:e.color},null,8,["text","icon","color"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])}}}),G=f({__name:"StoryTagGroup",setup(p){const o=h(),n=k(),m=T(()=>[...o.tags,...n.tags]);return(r,c)=>(i(),v(L,{tags:m.value,noLabel:"",noValue:"",modelValue:x(o).selection,"onUpdate:modelValue":c[0]||(c[0]=l=>x(o).selection=l)},null,8,["tags","modelValue"]))}}),I={class:"d-flex justify-space-around"},R=f({__name:"FeedbackBar",setup(p){const o=g(""),n=g([]),m=g({upvote:{icon:"$upvote",color:"primary"},downvote:{icon:"$downvote",color:"error"}}),r=g({comment:{icon:"$comment",color:"secondary"},favorite:{icon:"$favorite",color:"quaternary"}});return(c,l)=>{const _=s("v-btn"),u=s("v-btn-toggle");return i(),y("div",I,[t(u,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),"selected-class":"opacity-100",class:"d-flex flex-row justify-space-around"},{default:a(()=>[(i(!0),y(w,null,S(m.value,(e,d)=>(i(),v(_,{key:d,value:d,icon:o.value===d?`${e.icon}`:`${e.icon}-off`,color:e.color,density:"compact",class:"opacity-10 mx-3",variant:"plain",ripple:!1},null,8,["value","icon","color"]))),128))]),_:1},8,["modelValue"]),t(u,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value=e),"selected-class":"opacity-100",class:"d-flex flex-row justify-space-around",multiple:""},{default:a(()=>[(i(!0),y(w,null,S(r.value,(e,d)=>(i(),v(_,{key:d,value:d,color:e.color,density:"compact",variant:"plain",class:"opacity-10 mx-3",ripple:!1,multiple:"",icon:n.value.includes(d)?e.icon:`${e.icon}-off`},null,8,["value","color","icon"]))),128))]),_:1},8,["modelValue"])])}}}),q=f({__name:"StoryRenderer",setup(p){const o=h(),n=k(),m=M(),r=T(()=>[...o.tags,...n.tags]);function c(){let _="";if(window.getSelection){const u=window.getSelection();u&&(_=u.toString())}return o.tempTag(_),m.add=!0,o.tempTag.name}function l(){const _=r.value.filter(e=>o.selection.includes(e.id)),u=n.linkTags(_,n.HTML);return n.markitdown(u)}return(_,u)=>{const e=s("v-sheet");return i(),v(e,{flat:"",class:"bg-transparent"},{default:a(()=>[N("h2",null,b(x(n).title),1),t(U,{markdown:l(),class:"story-body",onRightClick:u[0]||(u[0]=d=>c())},null,8,["markdown"])]),_:1})}}}),J=f({__name:"StoryView",setup(p){return(o,n)=>{const m=s("v-img"),r=s("v-col"),c=s("v-row"),l=s("v-container");return i(),v(l,null,{default:a(()=>[t(c,null,{default:a(()=>[t(r,{cols:"12",sm:"4"},{default:a(()=>[t(m,{src:x(A),alt:"A glowing green portal","max-width":"512px"},null,8,["src"]),t(R)]),_:1}),t(r,{cols:"12",sm:"8"},{default:a(()=>[t(q)]),_:1})]),_:1}),t(c,null,{default:a(()=>[t(r,{cols:"12",sm:"8"},{default:a(()=>[t(E)]),_:1}),t(r,{cols:"4"},{default:a(()=>[t(G)]),_:1})]),_:1})]),_:1})}}});export{J as default};
