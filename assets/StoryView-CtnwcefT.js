import{d as S,r as w,a as c,o as i,c as x,b as t,w as a,F as T,e as k,f,n as V,g as C,t as h,u as $,h as y,T as j,i as B,j as A,k as I,l as U,M as q,_ as D}from"./index-tsJXwpD5.js";const F="/jennyeverywhere.online/assets/001-UcwiZjcT.png",N={class:"d-flex justify-space-around"},R=S({__name:"FeedbackBar",setup(m){const n=w(""),s=w([]),d=w({upvote:{icon:"$upvote",color:"primary"},downvote:{icon:"$downvote",color:"error"}}),v=w({comment:{icon:"$comment",color:"secondary"},favorite:{icon:"$favorite",color:"quaternary"}});return(l,r)=>{const _=c("v-btn"),g=c("v-btn-toggle");return i(),x("div",N,[t(g,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=e=>n.value=e),"selected-class":"opacity-100",class:"d-flex flex-row justify-space-around"},{default:a(()=>[(i(!0),x(T,null,k(d.value,(e,o)=>(i(),f(_,{key:o,value:o,icon:n.value===o?`${e.icon}`:`${e.icon}-off`,color:e.color,density:"compact",class:"opacity-10 mx-3",variant:"plain",ripple:!1},null,8,["value","icon","color"]))),128))]),_:1},8,["modelValue"]),t(g,{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=e=>s.value=e),"selected-class":"opacity-100",class:"d-flex flex-row justify-space-around",multiple:""},{default:a(()=>[(i(!0),x(T,null,k(v.value,(e,o)=>(i(),f(_,{key:o,value:o,color:e.color,density:"compact",variant:"plain",class:"opacity-10 mx-3",ripple:!1,multiple:"",icon:s.value.includes(o)?e.icon:`${e.icon}-off`},null,8,["value","color","icon"]))),128))]),_:1},8,["modelValue"])])}}}),E=S({__name:"StoryChoice",props:{icon:String,text:String,class:String,color:String,value:String,tags:Array,expand:Boolean},setup(m){return(n,s)=>{const d=c("v-icon"),v=c("v-spacer"),l=c("v-chip"),r=c("v-card-item"),_=c("v-card"),g=c("v-item");return i(),f(g,null,{default:a(({isSelected:e,selectedClass:o,toggle:u})=>[t(_,{hover:"",class:V(["story-choice border-s-lg  bg-background border-opacity-25",o,`border-${m.color}`,e?"border-e-lg":"border-e-none"]),onClick:u},{default:a(()=>[t(r,{density:"compact"},{prepend:a(()=>[t(d,{icon:m.icon,color:e?m.color:"text",class:V(e?null:"opacity-20")},null,8,["icon","color","class"])]),default:a(()=>[C(h(m.text)+" ",1),t(v),(i(!0),x(T,null,k(m.tags,(p,b)=>(i(),f(l,{key:b},{default:a(()=>[C(h(p),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1})}}}),z=S({__name:"StoryChoiceGroup",setup(m){const n=$(),s=w(),d=v=>{const l=n.choices[v];n.tagMap.clearTags(),s.value!==void 0&&n.choices[s.value].tags.forEach(r=>{n.tagMap.addTag(new j(`${r}`,l.color,l.icon))})};return(v,l)=>{const r=c("v-col"),_=c("v-row"),g=c("v-item-group");return i(),f(g,{"selected-class":"rounded-s-lg border-s-lg bg-surface border-opacity-100",modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>s.value=e),d]},{default:a(()=>[t(_,{dense:""},{default:a(()=>[(i(!0),x(T,null,k(y(n).choices,(e,o)=>(i(),f(r,{cols:"12",density:"compact",key:o},{default:a(()=>[t(E,{text:e.text,icon:e.icon,color:e.color},null,8,["text","icon","color"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])}}}),G=S({__name:"StoryRenderer",setup(m){const n=B(),s=$(),d=A(),v=I(()=>[...n.tags,...s.tags].filter((u,p,b)=>b.findIndex(M=>M.name===u.name)===p)),l=e=>{d.openDetails(),console.log("clickTag:",e)},r=(e,o,u)=>{const p=new j(e,o,u);n.addTag(p),n.triggerSnackbar(p),console.log("clickIcon:",e,o,u)},_=e=>{var u,p;console.log("onDragStart",window);const o=(u=window.getSelection())==null?void 0:u.toString().trim();o&&((p=e.dataTransfer)==null||p.setData("text/plain",o)),d.dragStart()};function g(){let e="";if(window.getSelection){const o=window.getSelection();o&&(e=o.toString())}return console.log("openAddTagDialog",e),n.tempTag(e),d.add=!0,n.tempTag.name}return(e,o)=>{const u=c("v-sheet");return i(),f(u,{flat:"",class:"bg-transparent"},{default:a(()=>[U("h2",null,h(y(s).title),1),t(q,{text:y(s).raw,tags:v.value,class:"story-body",onRightClick:o[0]||(o[0]=p=>g()),onDragstart:_,onClickTag:l,onClickIcon:r},null,8,["text","tags"])]),_:1})}}}),Z=S({__name:"StoryView",setup(m){const n=$(),s=B();return(d,v)=>{const l=c("v-col"),r=c("v-img"),_=c("v-row"),g=c("v-container");return i(),f(g,null,{default:a(()=>[t(_,null,{default:a(()=>[t(l,{cols:"12",sm:"8"},{default:a(()=>[t(G)]),_:1}),t(l,{cols:"auto",sm:"4"},{default:a(()=>[t(r,{src:y(F),alt:"A glowing green portal","max-width":"512px"},null,8,["src"]),t(R)]),_:1}),t(l,{cols:"auto",sm:"8"},{default:a(()=>[t(z)]),_:1}),t(l,{cols:"auto",sm:"4"},{default:a(()=>[t(D,{tags:y(n).tags},null,8,["tags"]),t(D,{tags:y(s).tags,labels:!1},null,8,["tags"])]),_:1})]),_:1})]),_:1})}}});export{Z as default};
