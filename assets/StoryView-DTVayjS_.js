import{d as x,r as f,a as l,o as _,c as y,b as o,w as a,F as w,e as S,f as g,n as k,g as V,t as $,u as v,T as j,h as C,i as B,j as A,k as U,_ as q,l as F}from"./index-Ug01TR-l.js";import{u as h}from"./story-D-OSaxAb.js";const M="/jennyeverywhere.online/assets/001-UcwiZjcT.png",N={class:"d-flex justify-space-around"},E=x({__name:"FeedbackBar",setup(d){const c=f(""),r=f([]),m=f({upvote:{icon:"$upvote",color:"primary"},downvote:{icon:"$downvote",color:"error"}}),p=f({comment:{icon:"$comment",color:"secondary"},favorite:{icon:"$favorite",color:"quaternary"}});return(u,i)=>{const s=l("v-btn"),t=l("v-btn-toggle");return _(),y("div",N,[o(t,{modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=e=>c.value=e),"selected-class":"opacity-100",class:"d-flex flex-row justify-space-around"},{default:a(()=>[(_(!0),y(w,null,S(m.value,(e,n)=>(_(),g(s,{key:n,value:n,icon:c.value===n?`${e.icon}`:`${e.icon}-off`,color:e.color,density:"compact",class:"opacity-10 mx-3",variant:"plain",ripple:!1},null,8,["value","icon","color"]))),128))]),_:1},8,["modelValue"]),o(t,{modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=e=>r.value=e),"selected-class":"opacity-100",class:"d-flex flex-row justify-space-around",multiple:""},{default:a(()=>[(_(!0),y(w,null,S(p.value,(e,n)=>(_(),g(s,{key:n,value:n,color:e.color,density:"compact",variant:"plain",class:"opacity-10 mx-3",ripple:!1,multiple:"",icon:r.value.includes(n)?e.icon:`${e.icon}-off`},null,8,["value","color","icon"]))),128))]),_:1},8,["modelValue"])])}}}),R=x({__name:"StoryChoice",props:{icon:String,text:String,class:String,color:String,value:String,tags:Array,expand:Boolean},setup(d){return(c,r)=>{const m=l("v-icon"),p=l("v-spacer"),u=l("v-chip"),i=l("v-card-item"),s=l("v-card"),t=l("v-item");return _(),g(t,null,{default:a(({isSelected:e,selectedClass:n,toggle:b})=>[o(s,{hover:"",class:k(["story-choice border-s-lg  bg-background border-opacity-25",n,`border-${d.color}`,e?"border-e-lg":"border-e-none"]),onClick:b},{default:a(()=>[o(i,{density:"compact"},{prepend:a(()=>[o(m,{icon:d.icon,color:e?d.color:"text",class:k(e?null:"opacity-20")},null,8,["icon","color","class"])]),default:a(()=>[V($(d.text)+" ",1),o(p),(_(!0),y(w,null,S(d.tags,(T,D)=>(_(),g(u,{key:D},{default:a(()=>[V($(T),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1})}}}),z=x({__name:"StoryChoiceGroup",setup(d){const c=h(),r=f(),m=p=>{const u=c.choices[p];c.tagMap.clearTags(),r.value!==void 0&&c.choices[r.value].tags.forEach(i=>{c.tagMap.addTag(new j(`${i}`,u.color,u.icon))})};return(p,u)=>{const i=l("v-col"),s=l("v-row"),t=l("v-item-group");return _(),g(t,{"selected-class":"rounded-s-lg border-s-lg bg-surface border-opacity-100",modelValue:r.value,"onUpdate:modelValue":[u[0]||(u[0]=e=>r.value=e),m]},{default:a(()=>[o(s,{dense:""},{default:a(()=>[(_(!0),y(w,null,S(v(c).choices,(e,n)=>(_(),g(i,{cols:"12",density:"compact",key:n},{default:a(()=>[o(R,{text:e.text,icon:e.icon,color:e.color},null,8,["text","icon","color"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])}}}),G=x({__name:"StoryRenderer",setup(d){const c=C(),r=h(),m=B(),p=A(()=>[...c.tags,...r.tags].filter((e,n,b)=>b.findIndex(T=>T.name===e.name)===n)),u=s=>{var e,n;console.log("onDragStart",window);const t=(e=window.getSelection())==null?void 0:e.toString().trim();t&&((n=s.dataTransfer)==null||n.setData("text/plain",t)),m.dragStart()};function i(){let s="";if(window.getSelection){const t=window.getSelection();t&&(s=t.toString())}return console.log("openAddTagDialog",s),c.tempTag(s),m.add=!0,c.tempTag.name}return(s,t)=>{const e=l("v-sheet");return _(),g(e,{flat:"",class:"bg-transparent"},{default:a(()=>[U("h2",null,$(v(r).title),1),o(q,{text:v(r).raw,tags:p.value,class:"story-body",onRightClick:t[0]||(t[0]=n=>i()),onDragstart:u},null,8,["text","tags"])]),_:1})}}}),Z=x({__name:"StoryView",setup(d){const c=C(),r=h();return(m,p)=>{const u=l("v-col"),i=l("v-img"),s=l("v-row"),t=l("v-container");return _(),g(t,null,{default:a(()=>[o(s,null,{default:a(()=>[o(u,{cols:"12",sm:"8"},{default:a(()=>[o(G)]),_:1}),o(u,{cols:"auto",sm:"4"},{default:a(()=>[o(i,{src:v(M),alt:"A glowing green portal","max-width":"512px"},null,8,["src"]),o(E)]),_:1}),o(u,{cols:"auto",sm:"8"},{default:a(()=>[o(z)]),_:1}),o(u,{cols:"auto",sm:"4"},{default:a(()=>[o(F,{tags:v(r).tags,selected:v(c).selection},null,8,["tags","selected"])]),_:1})]),_:1})]),_:1})}}});export{Z as default};
