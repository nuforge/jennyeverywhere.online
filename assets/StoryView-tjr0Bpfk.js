import{d as x,r as w,a,o as u,c as S,b as n,w as c,F as T,e as b,f as y,n as $,g as V,t as h,u as k,T as C,h as A,i as I,j as U,k as q,l as F,_ as M}from"./index-D4DoUqij.js";import{u as D}from"./story-DVt131Qn.js";const N="/jennyeverywhere.online/assets/001-UcwiZjcT.png",E={class:"d-flex justify-space-around"},R=x({__name:"FeedbackBar",setup(g){const t=w(""),s=w([]),i=w({upvote:{icon:"$upvote",color:"primary"},downvote:{icon:"$downvote",color:"error"}}),p=w({comment:{icon:"$comment",color:"secondary"},favorite:{icon:"$favorite",color:"quaternary"}});return(d,l)=>{const v=a("v-btn"),f=a("v-btn-toggle");return u(),S("div",E,[n(f,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value=o),"selected-class":"opacity-100",class:"d-flex flex-row justify-space-around"},{default:c(()=>[(u(!0),S(T,null,b(i.value,(o,e)=>(u(),y(v,{key:e,value:e,icon:t.value===e?`${o.icon}`:`${o.icon}-off`,color:o.color,density:"compact",class:"opacity-10 mx-3",variant:"plain",ripple:!1},null,8,["value","icon","color"]))),128))]),_:1},8,["modelValue"]),n(f,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=o=>s.value=o),"selected-class":"opacity-100",class:"d-flex flex-row justify-space-around",multiple:""},{default:c(()=>[(u(!0),S(T,null,b(p.value,(o,e)=>(u(),y(v,{key:e,value:e,color:o.color,density:"compact",variant:"plain",class:"opacity-10 mx-3",ripple:!1,multiple:"",icon:s.value.includes(e)?o.icon:`${o.icon}-off`},null,8,["value","color","icon"]))),128))]),_:1},8,["modelValue"])])}}}),z=x({__name:"StoryChoice",props:{icon:String,text:String,class:String,color:String,value:String,tags:Array,expand:Boolean},setup(g){return(t,s)=>{const i=a("v-icon"),p=a("v-spacer"),d=a("v-chip"),l=a("v-card-item"),v=a("v-card"),f=a("v-item");return u(),y(f,null,{default:c(({isSelected:o,selectedClass:e,toggle:r})=>[n(v,{hover:"",class:$(["story-choice border-s-lg  bg-background border-opacity-25",e,`border-${g.color}`,o?"border-e-lg":"border-e-none"]),onClick:r},{default:c(()=>[n(l,{density:"compact"},{prepend:c(()=>[n(i,{icon:g.icon,color:o?g.color:"text",class:$(o?null:"opacity-20")},null,8,["icon","color","class"])]),default:c(()=>[V(h(g.text)+" ",1),n(p),(u(!0),S(T,null,b(g.tags,(_,m)=>(u(),y(d,{key:m},{default:c(()=>[V(h(_),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1})}}}),G=x({__name:"StoryChoiceGroup",setup(g){const t=D(),s=w(),i=p=>{const d=t.choices[p];t.tagMap.clearTags(),s.value!==void 0&&t.choices[s.value].tags.forEach(l=>{t.tagMap.addTag(new C(`${l}`,d.color,d.icon))})};return(p,d)=>{const l=a("v-col"),v=a("v-row"),f=a("v-item-group");return u(),y(f,{"selected-class":"rounded-s-lg border-s-lg bg-surface border-opacity-100",modelValue:s.value,"onUpdate:modelValue":[d[0]||(d[0]=o=>s.value=o),i]},{default:c(()=>[n(v,{dense:""},{default:c(()=>[(u(!0),S(T,null,b(k(t).choices,(o,e)=>(u(),y(l,{cols:"12",density:"compact",key:e},{default:c(()=>[n(z,{text:o.text,icon:o.icon,color:o.color},null,8,["text","icon","color"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])}}}),L=x({__name:"StoryRenderer",setup(g){const t=A(),s=D(),i=I(),p=U(),d=q(()=>[...t.tags,...s.tags].filter((_,m,j)=>j.findIndex(B=>B.name===_.name)===m)),l=e=>{i.openDetails(),p.focusOn(e),console.log("clickTag:",e)},v=(e,r,_)=>{const m=new C(e,r,_);t.addTag(m),t.triggerSnackbar(m),console.log("clickIcon:",e,r,_)},f=e=>{var _,m;console.log("onDragStart",window);const r=(_=window.getSelection())==null?void 0:_.toString().trim();r&&((m=e.dataTransfer)==null||m.setData("text/plain",r)),i.dragStart()};function o(){let e="";if(window.getSelection){const r=window.getSelection();r&&(e=r.toString())}return console.log("openAddTagDialog",e),t.tempTag(e),i.add=!0,t.tempTag.name}return(e,r)=>{const _=a("v-sheet");return u(),y(_,{flat:"",class:"bg-transparent"},{default:c(()=>[F("h2",null,h(k(s).title),1),n(M,{body:k(s).raw,name:"Story",tags:d.value,class:"story-body",onRightClick:r[0]||(r[0]=m=>o()),onDragstart:f,onClickTag:l,onClickIcon:v},null,8,["body","tags"])]),_:1})}}}),Z=x({__name:"StoryView",setup(g){return(t,s)=>{const i=a("v-col"),p=a("v-img"),d=a("v-row"),l=a("v-container");return u(),y(l,null,{default:c(()=>[n(d,null,{default:c(()=>[n(i,{cols:"12",sm:"8"},{default:c(()=>[n(L)]),_:1}),n(i,{cols:"auto",sm:"4"},{default:c(()=>[n(p,{src:k(N),alt:"A glowing green portal","max-width":"512px"},null,8,["src"]),n(R)]),_:1}),n(i,{cols:"auto",sm:"8"},{default:c(()=>[n(G)]),_:1})]),_:1})]),_:1})}}});export{Z as default};
